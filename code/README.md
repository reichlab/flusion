# Code for the flusion model

This directory contains all code for the flusion model, organized into the following subdirectories:

- `data-pipeline`: Code used for loading and normalizing the data contained in `flusion/data-raw`. This is installed as a python module in the project's Conda environment.
- `eda`: A python notebook with exploratory data analyses exploring relationships between the input data signals.
- `eval`: R scripts with informal evaluations that I ran each week throughout the season.  These are likely not of interest to others.
- `flusion`: R scripts used to compute the flusion submission as an ensemble of the `gbq_qr`, `gbq_qr_no_level`, and `sarix` models, and to visualize the predictions.
- `gbq`: Python code for running the GBQ models.
- `sarix_model`: A notebook used to generate sarix model predictions.

## Workflow

Weekly submissions can be generated by following these steps:

1. Update the HHS data snapshot by running `flusion/data-raw/influenza-hhs/download-hhs.R`.
2. Run the GBQ models, following instructions in `gbq/README.md`.
3. Run the sarix notebook, `sarix_model/sarix.ipynb`.
4. Create the flusion ensemble by running `flusion/flusion.R`.
5. Plot the submissions by running `flusion/validate_and_plot.R`.
